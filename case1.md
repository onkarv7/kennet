# Appointment Scheduling System Database Design This document outlines the database design for a system that manages appointments between patients, doctors, and clinics. The system supports booking appointments with specific doctors or available doctors at a clinic, tracking time slots, and handling multiple appointments across multiple clinics. ## High-Level Design (HLD) The system manages patients, doctors, clinics, and appointments with the following requirements: ### Entities - **Patients**: Individuals booking appointments. - **Doctors**: Medical professionals providing services. - **Clinics**: Locations where appointments occur. - **Appointments**: Scheduled events linking patients, doctors, clinics, and time slots. - **Time Slots**: Available time periods for scheduling. ### Relationships - **Doctors ↔ Clinics**: Many-to-Many (a doctor can work in multiple clinics, and a clinic can have multiple doctors). - **Patients → Appointments**: One-to-Many (a patient can book multiple appointments). - **Appointments**: Tied to one Doctor, one Clinic, and one Time Slot (One-to-One for each). ### Key Features - Query available doctors at a clinic for a given time slot. - Book an appointment with a specific doctor at a specific clinic and time slot. - Track all appointments for a patient across clinics and doctors. ### HLD Components - **Database**: Relational database (e.g., PostgreSQL, MySQL) for structured data and relationships. - **Tables**: - `Patients`: Stores patient information. - `Doctors`: Stores doctor information. - `Clinics`: Stores clinic information. - `Doctor_Clinics`: Junction table for the many-to-many relationship between Doctors and Clinics. - `Appointments`: Stores appointment details (links Patient, Doctor, Clinic, and Time Slot). - `Time_Slots`: Stores available time slots for scheduling. --- ## Low-Level Design (LLD) Below is the detailed schema with tables, columns, primary keys (PK), foreign keys (FK), and relationships. ### 1. Patients Table Stores patient details. | Column       | Type    | Description                     | |--------------|---------|---------------------------------| | `patient_id` | Integer | PK: Unique identifier           | | `first_name` | Varchar | Patient’s first name            | | `last_name`  | Varchar | Patient’s last name             | | `phone`      | Varchar | Contact number                  | | `email`      | Varchar | Email address (optional)        | ### 2. Doctors Table Stores doctor details. | Column       | Type    | Description                     | |--------------|---------|---------------------------------| | `doctor_id`  | Integer | PK: Unique identifier           | | `first_name` | Varchar | Doctor’s first name             | | `last_name`  | Varchar | Doctor’s last name              | | `specialty`  | Varchar | Medical specialty (e.g., "Cardiology") | ### 3. Clinics Table Stores clinic details. | Column      | Type    | Description                     | |-------------|---------|---------------------------------| | `clinic_id` | Integer | PK: Unique identifier           | | `name`      | Varchar | Clinic name                     | | `address`   | Varchar | Clinic location                 | | `phone`     | Varchar | Clinic contact number           | ### 4. Doctor_Clinics Table (Junction Table) Links doctors to clinics (many-to-many relationship). | Column      | Type    | Description                     | |-------------|---------|---------------------------------| | `doctor_id` | Integer | FK: References `Doctors(doctor_id)` | | `clinic_id` | Integer | FK: References `Clinics(clinic_id)` | - **Primary Key**: Composite key (`doctor_id`, `clinic_id`). ### 5. Time_Slots Table Stores available time slots for appointments. | Column      | Type     | Description                     | |-------------|----------|---------------------------------| | `slot_id`   | Integer  | PK: Unique identifier           | | `start_time`| DateTime | Start time (e.g., "2025-04-03 10:00:00") | | `end_time`  | DateTime | End time (e.g., "2025-04-03 10:30:00") | | `clinic_id` | Integer  | FK: References `Clinics(clinic_id)` (optional) | ### 6. Appointments Table Stores booked appointments. | Column         | Type     | Description                     | |----------------|----------|---------------------------------| | `appointment_id`| Integer  | PK: Unique identifier           | | `patient_id`   | Integer  | FK: References `Patients(patient_id)` | | `doctor_id`    | Integer  | FK: References `Doctors(doctor_id)` | | `clinic_id`    | Integer  | FK: References `Clinics(clinic_id)` | | `slot_id`      | Integer  | FK: References `Time_Slots(slot_id)` | | `status`       | Varchar  | Status (e.g., "Scheduled", "Cancelled") | | `created_at`   | DateTime | Timestamp of booking            | ### Relationships - **Patients → Appointments**: One-to-Many - **Doctors → Appointments**: One-to-Many - **Clinics → Appointments**: One-to-Many - **Time_Slots → Appointments**: One-to-One - **Doctors ↔ Clinics**: Many-to-Many (via `Doctor_Clinics`) --- ## How It Works ### Booking with a Specific Doctor 1. Query `Doctor_Clinics` to find clinics where the doctor works. 2. Query `Appointments` and `Time_Slots` to find available time slots for that doctor at those clinics. 3. Insert a row into `Appointments` with the selected `doctor_id`, `clinic_id`, `slot_id`, and `patient_id`. ### Booking at a Clinic with Any Available Doctor 1. Query `Doctor_Clinics` to get all doctors for the specified `clinic_id`. 2. Query `Appointments` to find which doctors are free during the requested time slot. 3. Assign an available doctor and insert the appointment into `Appointments`. ### Multiple Appointments for a Patient - The `Appointments` table supports multiple rows with the same `patient_id`, linking to different `doctor_id`, `clinic_id`, and `slot_id`. --- ## Sample SQL Queries ### Find Available Doctors at a Clinic for a Time Slot ```sql SELECT d.doctor_id, d.first_name, d.last_name FROM Doctors d JOIN Doctor_Clinics dc ON d.doctor_id = dc.doctor_id WHERE dc.clinic_id = 1 AND d.doctor_id NOT IN ( SELECT doctor_id FROM Appointments WHERE slot_id = 5 AND status = 'Scheduled' );
